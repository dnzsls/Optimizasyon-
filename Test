"""
FONKSÄ°YON 2: Erlang C
Ã‡aÄŸrÄ±nÄ±n kuyrukta bekleme olasÄ±lÄ±ÄŸÄ±nÄ± hesaplar
"""

def erlang_c(agents, traffic):
    """
    Erlang C: Ã‡aÄŸrÄ±larÄ±n kuyrukta bekleyeceÄŸi olasÄ±lÄ±ÄŸÄ± hesaplar
    
    Parametreler:
    - agents: KaÃ§ agent var?
    - traffic: KaÃ§ Erlang? (Fonksiyon 1'den gelir)
    
    DÃ¶nÃ¼ÅŸ:
    - 0-1 arasÄ± olasÄ±lÄ±k
    - 0.3 = %30 Ã§aÄŸrÄ± bekler
    - 0.8 = %80 Ã§aÄŸrÄ± bekler
    """
    if agents <= traffic or agents == 0:
        return 1.0  # Yetersiz agent = herkes bekler (%100)
    
    # Matematiksel formÃ¼l (Erlang B Ã¼zerinden)
    erlang_b = traffic / agents
    for i in range(2, int(agents) + 1):
        erlang_b = (traffic * erlang_b) / (i + traffic * erlang_b)
    
    erlang_c_val = erlang_b / (1 - (traffic / agents) * (1 - erlang_b))
    return min(erlang_c_val, 1.0)


# TEST EDELÄ°M
if __name__ == '__main__':
    print("=" * 60)
    print("FONKSÄ°YON 2: ERLANG C")
    print("=" * 60)
    
    # 5 Erlang traffic var (50 Ã§aÄŸrÄ±, 180sn AHT, 30dk interval)
    traffic = 5.0
    
    print(f"\nSabit: Traffic = {traffic} Erlang")
    print(f"Soru: FarklÄ± agent sayÄ±larÄ±yla bekleme olasÄ±lÄ±ÄŸÄ± ne?\n")
    
    # Test 1: Yetersiz agent
    agents1 = 5
    prob1 = erlang_c(agents1, traffic)
    print(f"Test 1: {agents1} agent")
    print(f"  Bekleme olasÄ±lÄ±ÄŸÄ±: {prob1:.2%}")
    print(f"  Yorum: Agent = Traffic, hemen hemen herkes bekler! âŒ")
    
    # Test 2: Biraz fazla agent
    agents2 = 7
    prob2 = erlang_c(agents2, traffic)
    print(f"\nTest 2: {agents2} agent")
    print(f"  Bekleme olasÄ±lÄ±ÄŸÄ±: {prob2:.2%}")
    print(f"  Yorum: {agents2-traffic:.0f} fazla agent var, daha iyi âœ“")
    
    # Test 3: Ã‡ok fazla agent
    agents3 = 10
    prob3 = erlang_c(agents3, traffic)
    print(f"\nTest 3: {agents3} agent")
    print(f"  Bekleme olasÄ±lÄ±ÄŸÄ±: {prob3:.2%}")
    print(f"  Yorum: {agents3-traffic:.0f} fazla agent, Ã§ok az bekleme âœ…")
    
    # Test 4: AÅŸÄ±rÄ± fazla agent
    agents4 = 15
    prob4 = erlang_c(agents4, traffic)
    print(f"\nTest 4: {agents4} agent")
    print(f"  Bekleme olasÄ±lÄ±ÄŸÄ±: {prob4:.2%}")
    print(f"  Yorum: {agents4-traffic:.0f} fazla agent, neredeyse hiÃ§ bekleme ğŸ¯")
    
    print("\n" + "=" * 60)
    print("ğŸ’¡ Ã–ÄRENME:")
    print("  - Agent = Traffic â†’ KÃ¶tÃ¼ (%100 bekleme)")
    print("  - Agent > Traffic â†’ Ä°yi (bekleme azalÄ±r)")
    print("  - Agent Ã§ok fazla â†’ Gereksiz (boÅŸa agent)")
    print("=" * 60)
